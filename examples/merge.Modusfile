image("merge") :-
  from("alpine")::set_workdir("/tmp"),
  inner::merge.

inner :-
  run("dd if=/dev/urandom of=file bs=1M count=200"),
  run("sha1sum file > file.sha1"),
  run("rm file"),
  other_image::copy("file", "file2"),
  run("sha1sum file2 > file2.sha1"),
  run("rm file2").

other_image :-
  from("debian")::set_workdir("/tmp"),
  run("dd if=/dev/urandom of=file bs=1M count=200").

image("no merge") :-
  from("alpine")::set_workdir("/tmp"),
  inner.
